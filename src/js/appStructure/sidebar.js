'use strict';

angular.module('mean.system').controller('SidebarController', ['$scope', 'Global', '$location',

	function($scope, Global, $location) {

		$scope.global = Global;

		$scope.menu = [{
			name: "Articles",
			id: "articles",
			link: "#!/articles",
			svg: "M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"
		}, {
			name: "Rencards",
			link: "#!/agenda",
			id: "agenda",
			svg: "M 7.1875 0 A 1.0001 1.0001 0 0 0 6.4375 0.65625 C 6.4375 0.65625 5.125 4.3410159 5.125 9.75 C 5.125 13.263743 8.2615457 16.435247 12 16.9375 L 12 22.90625 C 10.293166 24.39607 7 25 7 25 C 6.449 25 6 25.455 6 26 L 20 26 C 20 25.449 19.551 25 19 25 C 19 25 15.706834 24.39607 14 22.90625 L 14 16.9375 C 15.722713 16.690826 17.269348 15.803623 18.46875 14.65625 C 19.889826 13.296819 20.875 11.554194 20.875 9.75 C 20.875 4.3449524 19.59375 0.65625 19.59375 0.65625 A 1.0001 1.0001 0 0 0 18.65625 0 L 7.375 0 A 1.0001 1.0001 0 0 0 7.28125 0 A 1.0001 1.0001 0 0 0 7.1875 0 z M 8.15625 2 L 17.875 2 C 17.977128 2.3278754 18.156256 3.0475654 18.34375 4 L 9.96875 4 C 9.96875 4 9.03125 6.408 9.03125 10.375 C 9.03125 12.398429 10.866272 14.426057 13.09375 14.96875 A 1.0001 1.0001 0 0 0 12.8125 15 C 12.802099 14.999533 12.791646 15.000532 12.78125 15 C 9.8610219 14.850504 7.125 12.112138 7.125 9.75 C 7.125 5.3872947 7.905547 2.7845668 8.15625 2 z"
		}, {
			name: "Photos",
			link: "#!/albums",
			id: "albums",
			svg: "M25.947,11.14C25.947,5.966,21.968,1.734,15.334,1.734C8.701,1.734,5.052,5.966,5.052,11.14C5.052,16.314,6.510999999999999,15.651,6.510999999999999,18.57C6.510999999999999,19.665,5.449999999999999,19.134,5.449999999999999,21.489C5.449999999999999,24.076,9.065,23.712,10.126999999999999,24.772000000000002C11.187999999999999,25.834000000000003,11.088,27.791000000000004,11.088,27.791000000000004S11.286999999999999,28.587000000000003,11.652,28.354000000000003C11.652,28.354000000000003,11.883999999999999,28.918000000000003,12.149999999999999,28.586000000000002C12.149999999999999,28.586000000000002,12.415,29.149,12.681,28.686000000000003C12.681,28.686000000000003,12.946,29.317000000000004,13.376999999999999,28.852000000000004C13.376999999999999,28.852000000000004,13.807999999999998,29.482000000000003,14.306,28.985000000000003C14.306,28.985000000000003,14.87,29.515000000000004,15.5,29.118000000000002C16.13,29.515,16.694,28.985000000000003,16.694,28.985000000000003C17.191,29.482000000000003,17.622999999999998,28.852000000000004,17.622999999999998,28.852000000000004C18.054999999999996,29.317000000000004,18.317999999999998,28.686000000000003,18.317999999999998,28.686000000000003C18.586,29.150000000000002,18.848999999999997,28.586000000000002,18.848999999999997,28.586000000000002C19.114999999999995,28.918000000000003,19.346999999999998,28.354000000000003,19.346999999999998,28.354000000000003C19.711999999999996,28.586000000000002,19.910999999999998,27.791000000000004,19.910999999999998,27.791000000000004S19.810999999999996,25.834000000000003,20.871999999999996,24.772000000000006C21.933999999999997,23.711000000000006,25.547999999999995,24.076000000000004,25.547999999999995,21.489000000000004C25.547999999999995,19.135000000000005,24.486999999999995,19.665000000000003,24.486999999999995,18.570000000000004C24.488,15.651,25.947,16.314,25.947,11.14ZM10.333,20.992C8.55,21.277,7.743,20.777,7.548,19.5C7.04,16.172,10.103,15.634,11.626999999999999,15.817C12.357999999999999,15.905,13.616999999999999,16.679,13.616999999999999,17.642C13.617,20.229,11.992,20.727,10.333,20.992ZM16.461,25.303C16.13,25.303,15.598999999999998,24.872,15.565999999999999,24.076C15.533,24.872,14.935999999999998,25.303,14.604999999999999,25.303C14.272999999999998,25.303,13.774999999999999,24.972,13.741999999999999,24.176000000000002C13.709,23.380000000000003,14.77,20.163000000000004,15.533999999999999,20.163000000000004C16.296,20.163000000000004,17.358,23.380000000000003,17.325,24.176000000000002S16.794,25.303,16.461,25.303ZM23.361,19.5C23.166,20.777,22.357,21.277,20.574,20.992C18.916,20.726,17.291,20.229,17.291,17.642C17.291,16.679,18.549,15.905,19.281,15.817C20.805,15.634,23.869,16.172,23.361,19.5Z"
		}, {
			name: "Copaings",
			link: "#!/users",
			id: "users",
			svg: "M20.373,19.85c0,4.079-3.318,7.397-7.398,7.397c-4.079,0-7.398-3.318-7.398-7.397c0-2.466,1.213-4.652,3.073-5.997l-0.251-2.21c-2.875,1.609-4.825,4.684-4.825,8.207c0,5.184,4.217,9.4,9.401,9.4c4.395,0,8.093-3.031,9.117-7.111L20.37,19.73C20.37,19.771,20.373,19.81,20.373,19.85zM11.768,6.534c1.321,0,2.392-1.071,2.392-2.392c0-1.321-1.071-2.392-2.392-2.392c-1.321,0-2.392,1.071-2.392,2.392C9.375,5.463,10.446,6.534,11.768,6.534zM27.188,22.677l-5.367-7.505c-0.28-0.393-0.749-0.579-1.226-0.538c-0.035-0.003-0.071-0.006-0.106-0.006h-6.132l-0.152-1.335h4.557c0.53,0,0.96-0.429,0.96-0.959c0-0.53-0.43-0.959-0.96-0.959h-4.776l-0.25-2.192c-0.146-1.282-1.303-2.203-2.585-2.057C9.869,7.271,8.948,8.428,9.094,9.71l0.705,6.19c0.136,1.197,1.154,2.078,2.332,2.071c0.004,0,0.007,0.001,0.012,0.001h8.023l4.603,6.436c0.439,0.615,1.338,0.727,2.007,0.248C27.442,24.178,27.628,23.292,27.188,22.677z",
		},{
			name: "Chat",
			link: "#!/conversations",
			id: "conversations",
			svg: "M15.985,5.972c-7.563,0-13.695,4.077-13.695,9.106c0,2.877,2.013,5.44,5.147,7.108c-0.446,1.479-1.336,3.117-3.056,4.566c0,0,4.015-0.266,6.851-3.143c0.163,0.04,0.332,0.07,0.497,0.107c-0.155-0.462-0.246-0.943-0.246-1.443c0-3.393,3.776-6.05,8.599-6.05c3.464,0,6.379,1.376,7.751,3.406c1.168-1.34,1.847-2.892,1.847-4.552C29.68,10.049,23.548,5.972,15.985,5.972zM27.68,22.274c0-2.79-3.401-5.053-7.599-5.053c-4.196,0-7.599,2.263-7.599,5.053c0,2.791,3.403,5.053,7.599,5.053c0.929,0,1.814-0.116,2.637-0.319c1.573,1.597,3.801,1.744,3.801,1.744c-0.954-0.804-1.447-1.713-1.695-2.534C26.562,25.293,27.68,23.871,27.68,22.274z"
		}, {
			name: "Votes",
			id: "suggestions",
			svg: "M14.296,27.885v-2.013c0,0-0.402-1.408-1.073-2.013c-0.671-0.604-1.274-1.274-1.409-1.61c0,0-0.268,0.135-0.737-0.335s-1.812-2.616-1.812-2.616l-0.671-0.872c0,0-0.47-0.671-1.275-1.342c-0.805-0.672-0.938-0.067-1.476-0.738s0.604-1.275,1.006-1.409c0.403-0.134,1.946,0.134,2.684,0.872c0.738,0.738,0.738,0.738,0.738,0.738l1.073,1.141l0.537,0.201l0.671-1.073l-0.269-2.281c0,0-0.604-2.55-0.737-4.764c-0.135-2.214-0.47-5.703,1.006-5.837s1.007,2.55,1.073,3.489c0.067,0.938,0.806,5.232,1.208,5.568c0.402,0.335,0.671,0.066,0.671,0.066l0.402-7.514c0,0-0.479-2.438,1.073-2.549c0.939-0.067,0.872,1.543,0.872,2.147c0,0.604,0.269,7.514,0.269,7.514l0.537,0.135c0,0,0.402-2.214,0.604-3.153s0.604-2.416,0.537-3.087c-0.067-0.671-0.135-2.348,1.006-2.348s0.872,1.812,0.939,2.415s-0.134,3.153-0.134,3.757c0,0.604-0.738,3.623-0.537,3.824s2.08-2.817,2.349-3.958c0.268-1.141,0.201-3.02,1.408-2.885c1.208,0.134,0.47,2.817,0.402,3.086c-0.066,0.269-0.671,2.349-0.872,2.952s-0.805,1.476-1.006,2.013s0.402,2.349,0,4.629c-0.402,2.281-1.61,5.166-1.61,5.166l0.604,2.08c0,0-1.744,0.671-3.824,0.805C16.443,28.221,14.296,27.885,14.296,27.885z",
			link: "#!/others/suggestions"
		},
		{
			name: "Bugs",
			id: "issues",
			svg: "M28.589,10.903l-5.828,1.612c-0.534-1.419-1.338-2.649-2.311-3.628l3.082-5.44c0.271-0.48,0.104-1.092-0.38-1.365c-0.479-0.271-1.09-0.102-1.36,0.377l-2.924,5.162c-0.604-0.383-1.24-0.689-1.9-0.896c-0.416-1.437-1.652-2.411-3.058-2.562c-0.001-0.004-0.002-0.008-0.003-0.012c-0.061-0.242-0.093-0.46-0.098-0.65c-0.005-0.189,0.012-0.351,0.046-0.479c0.037-0.13,0.079-0.235,0.125-0.317c0.146-0.26,0.34-0.43,0.577-0.509c0.023,0.281,0.142,0.482,0.352,0.601c0.155,0.088,0.336,0.115,0.546,0.086c0.211-0.031,0.376-0.152,0.496-0.363c0.105-0.186,0.127-0.389,0.064-0.607c-0.064-0.219-0.203-0.388-0.414-0.507c-0.154-0.087-0.314-0.131-0.482-0.129c-0.167,0.001-0.327,0.034-0.481,0.097c-0.153,0.063-0.296,0.16-0.429,0.289c-0.132,0.129-0.241,0.271-0.33,0.426c-0.132,0.234-0.216,0.496-0.25,0.783c-0.033,0.286-0.037,0.565-0.009,0.84c0.017,0.16,0.061,0.301,0.094,0.449c-0.375-0.021-0.758,0.002-1.14,0.108c-0.482,0.133-0.913,0.36-1.28,0.653c-0.052-0.172-0.098-0.344-0.18-0.518c-0.116-0.249-0.263-0.486-0.438-0.716c-0.178-0.229-0.384-0.41-0.618-0.543C9.904,3.059,9.737,2.994,9.557,2.951c-0.18-0.043-0.352-0.052-0.516-0.027s-0.318,0.08-0.463,0.164C8.432,3.172,8.318,3.293,8.23,3.445C8.111,3.656,8.08,3.873,8.136,4.092c0.058,0.221,0.181,0.384,0.367,0.49c0.21,0.119,0.415,0.138,0.611,0.056C9.31,4.556,9.451,4.439,9.539,4.283c0.119-0.21,0.118-0.443-0.007-0.695c0.244-0.055,0.497-0.008,0.757,0.141c0.081,0.045,0.171,0.115,0.27,0.208c0.097,0.092,0.193,0.222,0.286,0.388c0.094,0.166,0.179,0.368,0.251,0.608c0.013,0.044,0.023,0.098,0.035,0.146c-0.911,0.828-1.357,2.088-1.098,3.357c-0.582,0.584-1.072,1.27-1.457,2.035l-5.16-2.926c-0.48-0.271-1.092-0.102-1.364,0.377C1.781,8.404,1.95,9.016,2.43,9.289l5.441,3.082c-0.331,1.34-0.387,2.807-0.117,4.297l-5.828,1.613c-0.534,0.147-0.846,0.699-0.698,1.231c0.147,0.53,0.697,0.843,1.231,0.694l5.879-1.627c0.503,1.057,1.363,2.28,2.371,3.443l-3.194,5.639c-0.272,0.481-0.104,1.092,0.378,1.363c0.239,0.137,0.512,0.162,0.758,0.094c0.248-0.068,0.469-0.229,0.604-0.471l2.895-5.109c2.7,2.594,5.684,4.123,5.778,1.053c1.598,2.56,3.451-0.338,4.502-3.976l5.203,2.947c0.24,0.138,0.514,0.162,0.762,0.094c0.246-0.067,0.467-0.229,0.603-0.471c0.272-0.479,0.104-1.091-0.377-1.362l-5.701-3.229c0.291-1.505,0.422-2.983,0.319-4.138l5.886-1.627c0.53-0.147,0.847-0.697,0.696-1.229C29.673,11.068,29.121,10.756,28.589,10.903z",
			link: "#!/others/issues"
		}];

		$scope.isCurrentPath = function(item) {

			var cur_path = "#!" + $location.path().substr(0, item.id.length + 1);
			return (cur_path.indexOf(item.id) !== -1) || (item.id.indexOf('albums') !== -1 && cur_path.indexOf('gallery') !== -1);

		};

		$scope.showChildren = function(evt, id) {

			evt.preventDefault();
			evt.stopPropagation();

			$('#' + id + '-childContainer').toggle();
		};

	}
]);