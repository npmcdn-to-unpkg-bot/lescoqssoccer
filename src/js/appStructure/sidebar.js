'use strict';

angular.module('mean.system').controller('SidebarController', ['$scope', 'Global', '$location',

	function($scope, Global, $location) {

		$scope.global = Global;

		$scope.menu = [{
			name: "Acceuil",
			link: "#!/home",
			id: "home",
			svg: "M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"
		}, {
			name: "Le tas de conneries",
			id: "articles",
			link: "#!/articles",
			svg: "M 18 0 C 10.6 1.4 15.80625 5.8875 9.90625 8.1875 C 12.20625 9.6875 15.5 10.9875 18.5 10.6875 C 18.9 10.1875 19.4125 9.9 18.8125 8 C 17.5125 3.6 14.7 3.6 18 0 z M 6.40625 9.03125 A 3.231323 3.231323 0 0 0 4.5 14.84375 C 6.2231837 16.19768 7.9718326 16.663189 10.5 17.3125 C 10.680583 17.358879 10.877236 17.392819 11.0625 17.4375 C 6.8180942 17.274712 4.78125 16.09375 4.78125 16.09375 A 3.231323 3.231323 0 0 0 2.9375 15.65625 A 3.231323 3.231323 0 0 0 1.625 21.71875 C 1.625 21.71875 5.7076429 23.9375 12 23.9375 C 18.292357 23.9375 22.375 21.71875 22.375 21.71875 A 3.231323 3.231323 0 0 0 22.0625 15.78125 A 3.2367896 3.2367896 0 0 0 18.78125 11.875 C 16.680309 11.95739 14.171833 11.588189 12.125 11.0625 C 10.385192 10.615664 8.7527883 9.8296897 8.5 9.75 C 8.459602 9.7182588 8.4436919 9.7135674 8.46875 9.71875 A 3.231323 3.231323 0 0 0 6.40625 9.03125 z"
		}, {
			name: "Rencards",
			link: "#!/agenda",
			id: "agenda",
			svg: "M 7.1875 0 A 1.0001 1.0001 0 0 0 6.4375 0.65625 C 6.4375 0.65625 5.125 4.3410159 5.125 9.75 C 5.125 13.263743 8.2615457 16.435247 12 16.9375 L 12 22.90625 C 10.293166 24.39607 7 25 7 25 C 6.449 25 6 25.455 6 26 L 20 26 C 20 25.449 19.551 25 19 25 C 19 25 15.706834 24.39607 14 22.90625 L 14 16.9375 C 15.722713 16.690826 17.269348 15.803623 18.46875 14.65625 C 19.889826 13.296819 20.875 11.554194 20.875 9.75 C 20.875 4.3449524 19.59375 0.65625 19.59375 0.65625 A 1.0001 1.0001 0 0 0 18.65625 0 L 7.375 0 A 1.0001 1.0001 0 0 0 7.28125 0 A 1.0001 1.0001 0 0 0 7.1875 0 z M 8.15625 2 L 17.875 2 C 17.977128 2.3278754 18.156256 3.0475654 18.34375 4 L 9.96875 4 C 9.96875 4 9.03125 6.408 9.03125 10.375 C 9.03125 12.398429 10.866272 14.426057 13.09375 14.96875 A 1.0001 1.0001 0 0 0 12.8125 15 C 12.802099 14.999533 12.791646 15.000532 12.78125 15 C 9.8610219 14.850504 7.125 12.112138 7.125 9.75 C 7.125 5.3872947 7.905547 2.7845668 8.15625 2 z"
		}, {
			name: "Photos de soir√©es - vacances",
			link: "#!/albums",
			id: "albums",
			svg: "M25.947,11.14C25.947,5.966,21.968,1.734,15.334,1.734C8.701,1.734,5.052,5.966,5.052,11.14C5.052,16.314,6.510999999999999,15.651,6.510999999999999,18.57C6.510999999999999,19.665,5.449999999999999,19.134,5.449999999999999,21.489C5.449999999999999,24.076,9.065,23.712,10.126999999999999,24.772000000000002C11.187999999999999,25.834000000000003,11.088,27.791000000000004,11.088,27.791000000000004S11.286999999999999,28.587000000000003,11.652,28.354000000000003C11.652,28.354000000000003,11.883999999999999,28.918000000000003,12.149999999999999,28.586000000000002C12.149999999999999,28.586000000000002,12.415,29.149,12.681,28.686000000000003C12.681,28.686000000000003,12.946,29.317000000000004,13.376999999999999,28.852000000000004C13.376999999999999,28.852000000000004,13.807999999999998,29.482000000000003,14.306,28.985000000000003C14.306,28.985000000000003,14.87,29.515000000000004,15.5,29.118000000000002C16.13,29.515,16.694,28.985000000000003,16.694,28.985000000000003C17.191,29.482000000000003,17.622999999999998,28.852000000000004,17.622999999999998,28.852000000000004C18.054999999999996,29.317000000000004,18.317999999999998,28.686000000000003,18.317999999999998,28.686000000000003C18.586,29.150000000000002,18.848999999999997,28.586000000000002,18.848999999999997,28.586000000000002C19.114999999999995,28.918000000000003,19.346999999999998,28.354000000000003,19.346999999999998,28.354000000000003C19.711999999999996,28.586000000000002,19.910999999999998,27.791000000000004,19.910999999999998,27.791000000000004S19.810999999999996,25.834000000000003,20.871999999999996,24.772000000000006C21.933999999999997,23.711000000000006,25.547999999999995,24.076000000000004,25.547999999999995,21.489000000000004C25.547999999999995,19.135000000000005,24.486999999999995,19.665000000000003,24.486999999999995,18.570000000000004C24.488,15.651,25.947,16.314,25.947,11.14ZM10.333,20.992C8.55,21.277,7.743,20.777,7.548,19.5C7.04,16.172,10.103,15.634,11.626999999999999,15.817C12.357999999999999,15.905,13.616999999999999,16.679,13.616999999999999,17.642C13.617,20.229,11.992,20.727,10.333,20.992ZM16.461,25.303C16.13,25.303,15.598999999999998,24.872,15.565999999999999,24.076C15.533,24.872,14.935999999999998,25.303,14.604999999999999,25.303C14.272999999999998,25.303,13.774999999999999,24.972,13.741999999999999,24.176000000000002C13.709,23.380000000000003,14.77,20.163000000000004,15.533999999999999,20.163000000000004C16.296,20.163000000000004,17.358,23.380000000000003,17.325,24.176000000000002S16.794,25.303,16.461,25.303ZM23.361,19.5C23.166,20.777,22.357,21.277,20.574,20.992C18.916,20.726,17.291,20.229,17.291,17.642C17.291,16.679,18.549,15.905,19.281,15.817C20.805,15.634,23.869,16.172,23.361,19.5Z"
		}, {
			name: "Les copaings",
			link: "#!/users",
			id: "users",
			svg: "M20.373,19.85c0,4.079-3.318,7.397-7.398,7.397c-4.079,0-7.398-3.318-7.398-7.397c0-2.466,1.213-4.652,3.073-5.997l-0.251-2.21c-2.875,1.609-4.825,4.684-4.825,8.207c0,5.184,4.217,9.4,9.401,9.4c4.395,0,8.093-3.031,9.117-7.111L20.37,19.73C20.37,19.771,20.373,19.81,20.373,19.85zM11.768,6.534c1.321,0,2.392-1.071,2.392-2.392c0-1.321-1.071-2.392-2.392-2.392c-1.321,0-2.392,1.071-2.392,2.392C9.375,5.463,10.446,6.534,11.768,6.534zM27.188,22.677l-5.367-7.505c-0.28-0.393-0.749-0.579-1.226-0.538c-0.035-0.003-0.071-0.006-0.106-0.006h-6.132l-0.152-1.335h4.557c0.53,0,0.96-0.429,0.96-0.959c0-0.53-0.43-0.959-0.96-0.959h-4.776l-0.25-2.192c-0.146-1.282-1.303-2.203-2.585-2.057C9.869,7.271,8.948,8.428,9.094,9.71l0.705,6.19c0.136,1.197,1.154,2.078,2.332,2.071c0.004,0,0.007,0.001,0.012,0.001h8.023l4.603,6.436c0.439,0.615,1.338,0.727,2.007,0.248C27.442,24.178,27.628,23.292,27.188,22.677z"
		}, {
			name: "Autres",
			id: "others",
			svg: "M12.75,25.498h5.5v-5.164h-5.5V25.498zM15.5,28.166c1.894,0,2.483-1.027,2.667-1.666h-5.334C13.017,27.139,13.606,28.166,15.5,28.166zM15.5,2.833c-3.866,0-7,3.134-7,7c0,3.859,3.945,4.937,4.223,9.499h1.271c-0.009-0.025-0.024-0.049-0.029-0.078L11.965,8.256c-0.043-0.245,0.099-0.485,0.335-0.563c0.237-0.078,0.494,0.026,0.605,0.25l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.446-0.277c0.189,0,0.362,0.107,0.446,0.277l0.553,1.106l0.553-1.106c0.084-0.17,0.257-0.277,0.448-0.277c0.189,0,0.36,0.107,0.446,0.277l0.554,1.106l0.553-1.106c0.111-0.224,0.368-0.329,0.604-0.25s0.377,0.318,0.333,0.563l-1.999,10.998c-0.005,0.029-0.02,0.053-0.029,0.078h1.356c0.278-4.562,4.224-5.639,4.224-9.499C22.5,5.968,19.366,2.833,15.5,2.833zM17.458,10.666c-0.191,0-0.364-0.107-0.446-0.275l-0.554-1.106l-0.553,1.106c-0.086,0.168-0.257,0.275-0.446,0.275c-0.191,0-0.364-0.107-0.449-0.275l-0.553-1.106l-0.553,1.106c-0.084,0.168-0.257,0.275-0.446,0.275c-0.012,0-0.025,0-0.037-0.001l1.454,8.001h1.167l1.454-8.001C17.482,10.666,17.47,10.666,17.458,10.666z",
			children: [{
				name: "Suggestions",
				link: "#!/others/suggestions",
			}, {
				name: "Bugs",
				link: "#!/others/issues",
			}]
		}];

		$scope.isCurrentPath = function(item) {

			var cur_path = "#!" + $location.path().substr(0, item.id.length + 1);
			return (cur_path.indexOf(item.id) !== -1) || (item.id.indexOf('albums') !== -1 && cur_path.indexOf('gallery') !== -1);

		};

		$scope.showChildren = function(evt, id) {

			evt.preventDefault();
			evt.stopPropagation();

			$('#' + id + '-childContainer').toggle();
		};

	}
]);